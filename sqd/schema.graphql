enum PaymentStatus {
  PENDING
  COMPLETED
  FAILED
}

enum TaskType {
  STAR_REPO
  MERGE_PR
  OPEN_ISSUE
  COMMENT
  CUSTOM
}

type Worker @entity {
  id: ID! # Worker's wallet address
  totalEarned: BigInt!
  totalTasksCompleted: Int!
  successRate: Float!
  averagePaymentTime: Int! # in seconds
  firstPaymentAt: DateTime
  lastPaymentAt: DateTime
  payments: [Payment!]! @derivedFrom(field: "worker")
  reputationScore: Float! # Calculated score based on history
}

type Payment @entity {
  id: ID! # Transaction hash
  worker: Worker!
  amount: BigInt!
  token: String! # Token contract address (e.g., USDC)
  status: PaymentStatus!
  taskType: TaskType!
  taskDescription: String
  proofId: String! # vlayer proof ID
  blockNumber: Int!
  timestamp: DateTime!
  transactionHash: String!
  gasUsed: BigInt
}

type BountyContract @entity {
  id: ID! # Contract address
  totalPayments: BigInt!
  totalWorkers: Int!
  averagePayment: BigInt!
  deployedAt: DateTime!
  owner: String!
}

type DailyStats @entity {
  id: ID! # Date in YYYY-MM-DD format
  date: DateTime!
  totalPayments: BigInt!
  paymentCount: Int!
  uniqueWorkers: Int!
  averagePayment: BigInt!
}
